// [html.md](http://neocotic.com/html.md) 1.0.0  
// (c) 2012 Alasdair Mercer  
// Freely distributable under the MIT license.  
// Based on [Make.text](http://homepage.mac.com/tjim/) 1.5  
// (c) 2007 Trevor Jim  
// Licensed under the GPL Version 2 license.  
// For all details and documentation:  
// <http://neocotic.com/html.md>
(function(){function J(){var a=l;l=false;return function(){l=a}}function I(a,b){if(h.debug)i.push(b+": "+a)}function H(b){d=true;e=true;f=true;g="";i=[];j=false;k=false;l=false;m=null;n="\n";o=[];p=[];r={};s={};if(typeof b!=="object")b={};for(var c in a){if(a.hasOwnProperty(c)){if(b.hasOwnProperty(c)){h[c]=b[c]}else{h[c]=a[c]}}}}function G(a){if(!d){u(n.replace(/[ ]{4}$/,a));d=e=f=true}else if(m){m=m.replace(/[ ]{4}$/,a)}}function F(a){var b=n;n+=a;if(f){u(a)}else{C()}return function(){n=b;d=f=false;C()}}function E(a){if(typeof getComputedStyle!=="undefined"){try{var b=getComputedStyle(a,null);if(b&&b.getPropertyValue&&b.getPropertyValue("display")==="none"){return}}catch(c){I(c,"getComputedStyle")}}if(a.nodeType===t.ELEMENT_NODE){var d=null,f=null,g=null,i=false;try{switch(a.tagName){case"APPLET":case"AREA":case"AUDIO":case"BUTTON":case"CANVAS":case"COMMAND":case"DATALIST":case"EMBED":case"HEAD":case"INPUT":case"KEYGEN":case"MAP":case"MENU":case"METER":case"NOFRAMES":case"NOSCRIPT":case"OBJECT":case"OPTION":case"PARAM":case"PROGRESS":case"SCRIPT":case"SELECT":case"SOURCE":case"STYLE":case"TEXTAREA":case"TRACK":case"VIDEO":i=true;break;case"BODY":case"FORM":break;case"H1":C();A("# ");break;case"H2":C();A("## ");break;case"H3":C();A("### ");break;case"H4":C();A("#### ");break;case"H5":C();A("##### ");break;case"H6":C();A("###### ");break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"DIV":case"FOOTER":case"HEADER":case"P":case"SECTION":C();break;case"DETAILS":C();if(a.getAttribute("open")==null){i=true;var m=a.getElementsByTagName("summary")[0];if(m){E(m)}}break;case"BR":v();break;case"HR":C();A("--------------------------------");C();break;case"CITE":case"DFN":case"EM":case"I":case"U":case"VAR":A("_");e=true;d=B("_");break;case"DT":C();case"B":case"STRONG":A("**");e=true;d=B("**");break;case"Q":A('"');e=true;d=B('"');break;case"OL":f=F("    ");g=z();d=function(){f();g()};break;case"UL":f=F("    ");g=J();d=function(){f();g()};break;case"LI":if(l){G("1.  ")}else{G("*   ")}break;case"PRE":f=F("    ");g=D();d=function(){f();g()};break;case"CODE":case"KBD":case"SAMP":if(!k){A("`");f=w();g=B("`");d=function(){f();g()}}break;case"BLOCKQUOTE":case"DD":d=F("> ");break;case"A":if(!a.href)break;var n;if(r[a.href]){n=r[a.href]}else{n=o.length;o[n]=a.href;r[a.href]=n;if(a.title)p[n]=a.title}A("[");e=true;d=B("]["+n+"]");break;case"IMG":i=true;if(!a.src)break;A("!["+a.alt+"]("+a.src+")");break;case"FRAME":case"IFRAME":i=true;try{if(a.contentDocument&&a.contentDocument.documentElement){E(a.contentDocument.documentElement)}}catch(c){I(c,"contentDocument")}break;case"TR":d=C;break;default:if(h.debug)s[a.tagName]=null;break}}catch(c){I(c,a.tagName)}if(!i){for(var q=0;q<a.childNodes.length;q++){E(a.childNodes[q])}}if(d)d()}else if(a.nodeType===t.TEXT_NODE){if(k){A(a.nodeValue)}else if(j){A(x(a.nodeValue))}else{A(y(a.nodeValue))}}}function D(){var a=k;k=true;return function(){k=a}}function C(){if(f)return;if(!d){u(n);d=true}u(n);e=f=true}function B(a){return function(){A(a)}}function A(a){if(!a)return;if(!k){if(e){a=a.replace(/^[ \t\n]+/,"")}else if(/^[ \t]*\n/.test(a)){a=a.replace(/^[ \t\n]+/,"\n")}else{a=a.replace(/^[ \t]+/," ")}}if(a==="")return;f=/\n\n$/.test(a);d=/\n$/.test(a);e=/[ \t\n]$/.test(a);u(a.replace(/\n/g,n))}function z(){var a=l;l=true;return function(){l=a}}function y(a){a=a.replace(/\n([ \t]*\n)+/g,"\n");a=a.replace(/\n[ \t]+/g,"\n");a=a.replace(/[ \t]+/g," ");for(var d in b){if(b.hasOwnProperty(d)){a=a.replace(c[d],b[d])}}return a}function x(a){return a.replace(/`/g,"\\`")}function w(){var a=j;j=true;return function(){j=a}}function v(){u("  "+n);d=e=true}function u(a){if(m!=null)g+=m;m=a}var a={debug:false},b={"\\\\":"\\\\","\\[":"\\[","\\]":"\\]",">":"\\>",_:"\\_","\\*":"\\*","`":"\\`","#":"\\#","([0-9])\\.(\\s|$)":"$1\\.$2","©":"(c)","®":"(r)","™":"(tm)"," ":" ","·":"\\*"," ":" "," ":" "," ":" ","‘":"'","’":"'","“":'"',"”":'"',"…":"...","–":"--","—":"---"},c=function(){var a={};for(var c in b){if(b.hasOwnProperty(c)){a[c]=new RegExp(c,"g")}}return a}();var d=true,e=true,f=true,g="",h={},i=[],j=false,k=false,l=false,m=null,n="\n",o=[],p=[],q=window.md,r={},s={};var t=typeof t==="undefined"?{}:t;if(!t.ELEMENT_NODE)t.ELEMENT_NODE=1;if(!t.TEXT_NODE)t.TEXT_NODE=3;var K=window.md=function(a,b){if(!a)return"";H(b);var c=document.createElement("div");if(typeof a==="string"){c.innerHTML=a}else{c.appendChild(a)}E(c);u("\n\n");var d;for(var e=0;e<o.length;e++){d="\n";if(p[e])d=' "'+p[e]+'"\n';if(o[e])u("["+e+"]: "+o[e]+d)}if(h.debug){var f=[];for(var j in s){if(s.hasOwnProperty(j)){f.push(j)}}f.sort();if(f.length){console.log("Ignored tags;\n"+f.join(", "))}else{console.log("No tags were ignored")}if(i.length)console.log(i.join("\n"))}u("");return g.trim()};K.VERSION="1.0.0";K.noConflict=function(){window.md=q;return this}})()